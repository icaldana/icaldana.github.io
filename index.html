<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#009ee3">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>FIDO Standalone POC - Netlify Functions</title>
    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/fido.css">
</head>

<body>
    <header>
        <div class="home-icon">
            <a href="https://icaldana.github.io/">
                <i>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <defs></defs>
                        <g fill="none" fill-rule="evenodd">
                            <path fill="#000" fill-opacity=".8" fill-rule="nonzero"
                                d="M12 .4393L22.0607 10.5 21 11.8107l-.7537-.7534.0007 10.6927h-6.7192v-6.7745h-3.0004V21.75H3.751l-.0007-10.6907L3 11.8107 1.9393 10.5 12 .4393zm0 2.3714L5.2503 9.5593 5.251 20.25h3.7764v-6.7745h6.0004V20.25h3.7192l-.0007-10.6927L12 2.8107z">
                            </path>
                        </g>
                    </svg>
                </i>
                <span>Home</span>
            </a>
        </div>
        <h1>POC FIDO Standalone - Netlify Functions</h1>
    </header>

    <div class="netlify-banner">
        <strong>üåê Hospedado no Netlify</strong> - CORS resolvido com Functions serverless
    </div>

    <div class="container">
        <div class="fido-demo-container">
            <h2>üîê FIDO Standalone POC</h2>
            <p class="description">
                POC de integra√ß√£o FIDO Standalone com WebAuthn real para teste em dispositivos m√≥veis.
                Fluxo: Criar TX ‚Üí WebAuthn ‚Üí Validar ‚Üí Security Token ‚Üí Medios de Pago.
                <br><br>
                <strong>‚ö° Hospedado no Netlify com Functions serverless para resolver CORS definitivamente!</strong>
            </p>

            <div class="demo-section">
                <h3>Fluxo de Autentica√ß√£o</h3>
                <div class="auth-container">
                    <button id="authenticate-btn" class="auth-button">
                        üöÄ Iniciar Autentica√ß√£o FIDO
                    </button>
                    <div id="auth-status" class="auth-status"></div>
                </div>
            </div>

            <div class="demo-section">
                <h3>Logs de Comunica√ß√£o</h3>
                <div id="communication-logs" class="logs-container">
                    <div class="log-entry info">
                        <span class="timestamp">Aguardando intera√ß√£o via Netlify...</span>
                    </div>
                </div>
                <button id="clear-logs" class="clear-button">üßπ Limpar Logs</button>
            </div>

            <div class="demo-section">
                <h3>Resultado da Autentica√ß√£o</h3>
                <div id="auth-result" class="result-container">
                    <div class="result-placeholder">
                        Nenhuma autentica√ß√£o realizada ainda.
                    </div>
                </div>
            </div>

            <div class="demo-section">
                <h3>Configura√ß√£o</h3>
                <div class="config-container">
                    <div class="config-row">
                        <label>
                            <input type="text" id="user-id" placeholder="123456789" value="123456789" />
                            User ID (obrigat√≥rio para teste)
                        </label>
                    </div>
                </div>
            </div>

            <div class="demo-section">
                <h3>Integra√ß√£o com Medios de Pago</h3>
                <div id="payment-methods" class="payment-methods-container">
                    <div class="result-placeholder">
                        Complete a autentica√ß√£o para testar a integra√ß√£o via Netlify Functions.
                    </div>
                </div>
            </div>
        </div>

        <!-- Iframe oculto para o fluxo FIDO -->
        <iframe id="passkey-iframe" src="./fido-iframe.html" style="display: none;"
            sandbox="allow-scripts allow-same-origin" title="FIDO Authentication Iframe">
        </iframe>
    </div>

    <script src="./scripts/fido-standalone.js"></script>
</body>

</html>
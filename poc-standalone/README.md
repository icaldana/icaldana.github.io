# ğŸš€ POC WebAuthn Standalone

## ğŸ“‹ Overview

Proof of concept demonstrating complete integration between **WebAuthn**, **auth-passkey-frontend** and **Factors** for biometric authentication and security token generation.

### ğŸ¯ Objective

This POC simplifies the authentication flow to focus exclusively on the essential process:

- Manual Transaction ID input
- Real WebAuthn authentication with Factors challenge
- Valid security token generation
- End-to-end flow demonstration without external dependencies

## ğŸ”„ Flow Operation

### **Technical Process**

1. **Initialization**

   - Main page (`index.html`) loads isolated iframe (`iframe.html`)
   - Establishes MessageChannel for secure communication
   - User manually enters Transaction ID

2. **Challenge Request**

   - Iframe performs POST to `auth-passkey-frontend/passkey/validation/start`
   - Backend connects with Factors to generate cryptographic challenge
   - Real challenge is returned via `PublicKeyCredentialRequestOptions`

3. **WebAuthn Authentication**

   - Browser executes `navigator.credentials.get()` with real challenge
   - User confirms via biometric/PIN/TouchID
   - Signed credential is generated by authenticator

4. **Validation and Token**

   - Credential is sent to `auth-passkey-frontend/passkey/validation/finish`
   - Factors validates the cryptographic signature
   - `transactionCode` is returned as valid security token

---

## ğŸ—ï¸ Technical Architecture

### **Components**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    MessageChannel    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   index.html    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚   iframe.html   â”‚
â”‚                 â”‚                      â”‚                 â”‚
â”‚ - Interface UI  â”‚                      â”‚ - WebAuthn API  â”‚
â”‚ - Logger        â”‚                      â”‚ - HTTP Calls    â”‚
â”‚ - Result Displayâ”‚                      â”‚ - Crypto Logic  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                                  â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚auth-passkey-FE  â”‚
                                        â”‚                 â”‚
                                        â”‚ - Challenge Gen â”‚
                                        â”‚ - Validation    â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â”‚
                                                  â–¼
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚    Factors      â”‚
                                        â”‚                 â”‚
                                        â”‚ - Crypto Verify â”‚
                                        â”‚ - Token Gen     â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Technical Implementation

### **Main Files**

```
poc-standalone/
â”œâ”€â”€ index.html          # Interface and orchestration
â”œâ”€â”€ iframe.html         # WebAuthn isolation (sandbox)
â”œâ”€â”€ style.css          # Responsive UI
â”œâ”€â”€ script.js          # Business logic
â””â”€â”€ README.md          # Technical documentation
```

### **Challenge (auth-passkey-frontend)**

```javascript
{
  publicKeyCredentialRequestOptions: {
    challenge: Uint8Array, // Generated by Factors
    allowCredentials: [],
    userVerification: 'preferred',
    timeout: 60000
  }
}
```

### **Credential (WebAuthn)**

```javascript
{
  id: "credential_id",
  type: "public-key",
  response: {
    authenticatorData: ArrayBuffer,
    clientDataJSON: ArrayBuffer,
    signature: ArrayBuffer,
    userHandle: ArrayBuffer
  }
}
```

### **Output (Factors)**

```javascript
{
  transactionCode: "security_token_from_factors",
  sessionId: "session_timestamp",
  timestamp: "2025-09-12T14:22:00.000Z"
}
```

**POC Version**: 2.0.0 - Standalone  
**Integration**: auth-passkey-frontend + Factors  
**Compatibility**: WebAuthn Level 2 + Modern browsers

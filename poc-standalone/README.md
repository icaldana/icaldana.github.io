# 🚀 POC WebAuthn Standalone

## 📋 Overview

Proof of concept demonstrating complete integration between **WebAuthn**, **auth-passkey-frontend** and **Factors** for biometric authentication and security token generation.

### 🎯 Objective

This POC simplifies the authentication flow to focus exclusively on the essential process:

- Manual Transaction ID input
- Real WebAuthn authentication with Factors challenge
- Valid security token generation
- End-to-end flow demonstration without external dependencies

## 🔄 Flow Operation

### **Technical Process**

1. **Initialization**

   - Main page (`index.html`) loads isolated iframe (`iframe.html`)
   - Establishes MessageChannel for secure communication
   - User manually enters Transaction ID

2. **Challenge Request**

   - Iframe performs POST to `auth-passkey-frontend/passkey/validation/start`
   - Backend connects with Factors to generate cryptographic challenge
   - Real challenge is returned via `PublicKeyCredentialRequestOptions`

3. **WebAuthn Authentication**

   - Browser executes `navigator.credentials.get()` with real challenge
   - User confirms via biometric/PIN/TouchID
   - Signed credential is generated by authenticator

4. **Validation and Token**

   - Credential is sent to `auth-passkey-frontend/passkey/validation/finish`
   - Factors validates the cryptographic signature
   - `transactionCode` is returned as valid security token

---

## 🏗️ Technical Architecture

### **Components**

```
┌─────────────────┐    MessageChannel    ┌─────────────────┐
│   index.html    │◄──────────────────►│   iframe.html   │
│                 │                      │                 │
│ - Interface UI  │                      │ - WebAuthn API  │
│ - Logger        │                      │ - HTTP Calls    │
│ - Result Display│                      │ - Crypto Logic  │
└─────────────────┘                      └─────────────────┘
                                                  │
                                                  ▼
                                        ┌─────────────────┐
                                        │auth-passkey-FE  │
                                        │                 │
                                        │ - Challenge Gen │
                                        │ - Validation    │
                                        └─────────────────┘
                                                  │
                                                  ▼
                                        ┌─────────────────┐
                                        │    Factors      │
                                        │                 │
                                        │ - Crypto Verify │
                                        │ - Token Gen     │
                                        └─────────────────┘
```

---

## 📁 Technical Implementation

### **Main Files**

```
poc-standalone/
├── index.html          # Interface and orchestration
├── iframe.html         # WebAuthn isolation (sandbox)
├── style.css          # Responsive UI
├── script.js          # Business logic
└── README.md          # Technical documentation
```

### **Challenge (auth-passkey-frontend)**

```javascript
{
  publicKeyCredentialRequestOptions: {
    challenge: Uint8Array, // Generated by Factors
    allowCredentials: [],
    userVerification: 'preferred',
    timeout: 60000
  }
}
```

### **Credential (WebAuthn)**

```javascript
{
  id: "credential_id",
  type: "public-key",
  response: {
    authenticatorData: ArrayBuffer,
    clientDataJSON: ArrayBuffer,
    signature: ArrayBuffer,
    userHandle: ArrayBuffer
  }
}
```

### **Output (Factors)**

```javascript
{
  transactionCode: "security_token_from_factors",
  sessionId: "session_timestamp",
  timestamp: "2025-09-12T14:22:00.000Z"
}
```

**POC Version**: 2.0.0 - Standalone  
**Integration**: auth-passkey-frontend + Factors  
**Compatibility**: WebAuthn Level 2 + Modern browsers
